<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Generic key-value database."><meta name="keywords" content="rust, rustlang, rust-lang, KeyValueDB"><title>KeyValueDB in kvdb - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" href="../normalize.css"><link rel="stylesheet" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" href="../ayu.css" disabled><link rel="stylesheet" href="../dark.css" disabled><link rel="stylesheet" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script defer src="sidebar-items.js"></script><script defer src="../main.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../kvdb/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div></a><h2></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../kvdb/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div></a><h2 class="location"><a href="#">KeyValueDB</a></h2><div class="sidebar-elems"><section><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.get">get</a></li><li><a href="#tymethod.get_by_prefix">get_by_prefix</a></li><li><a href="#tymethod.iter">iter</a></li><li><a href="#tymethod.iter_with_prefix">iter_with_prefix</a></li><li><a href="#tymethod.restore">restore</a></li><li><a href="#tymethod.write">write</a></li></ul><h3><a href="#provided-methods">Provided Methods</a></h3><ul class="block"><li><a href="#method.has_key">has_key</a></li><li><a href="#method.has_prefix">has_prefix</a></li><li><a href="#method.io_stats">io_stats</a></li><li><a href="#method.transaction">transaction</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><h2><a href="index.html">In kvdb</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../wheel.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn">Trait <a href="index.html">kvdb</a>::<wbr><a class="trait" href="#">KeyValueDB</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../src/kvdb/lib.rs.html#105-153">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><div class="item-decl"><pre class="rust trait"><code>pub trait KeyValueDB: <a class="trait" href="https://doc.rust-lang.org/1.66.1/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> + <a class="trait" href="https://doc.rust-lang.org/1.66.1/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="../parity_util_mem/malloc_size/trait.MallocSizeOf.html" title="trait parity_util_mem::malloc_size::MallocSizeOf">MallocSizeOf</a> {
    fn <a href="#tymethod.get" class="fnname">get</a>(&amp;self, col: <a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.u32.html">u32</a>, key: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.u8.html">u8</a>]) -&gt; <a class="type" href="https://doc.rust-lang.org/1.66.1/std/io/error/type.Result.html" title="type std::io::error::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.66.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="type" href="type.DBValue.html" title="type kvdb::DBValue">DBValue</a>&gt;&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.get_by_prefix" class="fnname">get_by_prefix</a>(&amp;self, col: <a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.u32.html">u32</a>, prefix: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.u8.html">u8</a>]) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.66.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.66.1/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;[<a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.u8.html">u8</a>]&gt;&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.write" class="fnname">write</a>(&amp;self, transaction: <a class="struct" href="struct.DBTransaction.html" title="struct kvdb::DBTransaction">DBTransaction</a>) -&gt; <a class="type" href="https://doc.rust-lang.org/1.66.1/std/io/error/type.Result.html" title="type std::io::error::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.unit.html">()</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.iter" class="fnname">iter</a>&lt;'a&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;'a self,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;col: <a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.u32.html">u32</a><br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.66.1/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.66.1/core/iter/traits/iterator/trait.Iterator.html" title="trait core::iter::traits::iterator::Iterator">Iterator</a>&lt;Item = (<a class="struct" href="https://doc.rust-lang.org/1.66.1/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;[<a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.u8.html">u8</a>]&gt;, <a class="struct" href="https://doc.rust-lang.org/1.66.1/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;[<a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.u8.html">u8</a>]&gt;)&gt; + 'a&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.iter_with_prefix" class="fnname">iter_with_prefix</a>&lt;'a&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;'a self,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;col: <a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.u32.html">u32</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prefix: &amp;'a [<a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.u8.html">u8</a>]<br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.66.1/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.66.1/core/iter/traits/iterator/trait.Iterator.html" title="trait core::iter::traits::iterator::Iterator">Iterator</a>&lt;Item = (<a class="struct" href="https://doc.rust-lang.org/1.66.1/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;[<a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.u8.html">u8</a>]&gt;, <a class="struct" href="https://doc.rust-lang.org/1.66.1/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;[<a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.u8.html">u8</a>]&gt;)&gt; + 'a&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.restore" class="fnname">restore</a>(&amp;self, new_db: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.str.html">str</a>) -&gt; <a class="type" href="https://doc.rust-lang.org/1.66.1/std/io/error/type.Result.html" title="type std::io::error::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.unit.html">()</a>&gt;;

    fn <a href="#method.transaction" class="fnname">transaction</a>(&amp;self) -&gt; <a class="struct" href="struct.DBTransaction.html" title="struct kvdb::DBTransaction">DBTransaction</a> { ... }
<span class="item-spacer"></span>    fn <a href="#method.io_stats" class="fnname">io_stats</a>(&amp;self, _kind: <a class="enum" href="enum.IoStatsKind.html" title="enum kvdb::IoStatsKind">IoStatsKind</a>) -&gt; <a class="struct" href="struct.IoStats.html" title="struct kvdb::IoStats">IoStats</a> { ... }
<span class="item-spacer"></span>    fn <a href="#method.has_key" class="fnname">has_key</a>(&amp;self, col: <a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.u32.html">u32</a>, key: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.u8.html">u8</a>]) -&gt; <a class="type" href="https://doc.rust-lang.org/1.66.1/std/io/error/type.Result.html" title="type std::io::error::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.bool.html">bool</a>&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.has_prefix" class="fnname">has_prefix</a>(&amp;self, col: <a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.u32.html">u32</a>, prefix: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.u8.html">u8</a>]) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.bool.html">bool</a> { ... }
}</code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Generic key-value database.</p>
<p>The <code>KeyValueDB</code> deals with “column families”, which can be thought of as distinct
stores within a database. Keys written in one column family will not be accessible from
any other. The number of column families must be specified at initialization, with a
differing interface for each database.</p>
<p>The API laid out here, along with the <code>Sync</code> bound implies interior synchronization for
implementation.</p>
</div></details><h2 id="required-methods" class="small-section-header">Required Methods<a href="#required-methods" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.get" class="method has-srclink"><a class="srclink rightside" href="../src/kvdb/lib.rs.html#112">source</a><h4 class="code-header">fn <a href="#tymethod.get" class="fnname">get</a>(&amp;self, col: <a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.u32.html">u32</a>, key: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.u8.html">u8</a>]) -&gt; <a class="type" href="https://doc.rust-lang.org/1.66.1/std/io/error/type.Result.html" title="type std::io::error::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.66.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="type" href="type.DBValue.html" title="type kvdb::DBValue">DBValue</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Get a value by key.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.get_by_prefix" class="method has-srclink"><a class="srclink rightside" href="../src/kvdb/lib.rs.html#115">source</a><h4 class="code-header">fn <a href="#tymethod.get_by_prefix" class="fnname">get_by_prefix</a>(&amp;self, col: <a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.u32.html">u32</a>, prefix: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.u8.html">u8</a>]) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.66.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.66.1/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;[<a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.u8.html">u8</a>]&gt;&gt;</h4></section></summary><div class="docblock"><p>Get the first value matching the given prefix.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.write" class="method has-srclink"><a class="srclink rightside" href="../src/kvdb/lib.rs.html#118">source</a><h4 class="code-header">fn <a href="#tymethod.write" class="fnname">write</a>(&amp;self, transaction: <a class="struct" href="struct.DBTransaction.html" title="struct kvdb::DBTransaction">DBTransaction</a>) -&gt; <a class="type" href="https://doc.rust-lang.org/1.66.1/std/io/error/type.Result.html" title="type std::io::error::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.unit.html">()</a>&gt;</h4></section></summary><div class="docblock"><p>Write a transaction of changes to the backing store.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.iter" class="method has-srclink"><a class="srclink rightside" href="../src/kvdb/lib.rs.html#121">source</a><h4 class="code-header">fn <a href="#tymethod.iter" class="fnname">iter</a>&lt;'a&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;'a self,<br>&nbsp;&nbsp;&nbsp;&nbsp;col: <a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.u32.html">u32</a><br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.66.1/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.66.1/core/iter/traits/iterator/trait.Iterator.html" title="trait core::iter::traits::iterator::Iterator">Iterator</a>&lt;Item = (<a class="struct" href="https://doc.rust-lang.org/1.66.1/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;[<a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.u8.html">u8</a>]&gt;, <a class="struct" href="https://doc.rust-lang.org/1.66.1/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;[<a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.u8.html">u8</a>]&gt;)&gt; + 'a&gt;</h4></section></summary><div class="docblock"><p>Iterate over the data for a given column.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.iter_with_prefix" class="method has-srclink"><a class="srclink rightside" href="../src/kvdb/lib.rs.html#125-129">source</a><h4 class="code-header">fn <a href="#tymethod.iter_with_prefix" class="fnname">iter_with_prefix</a>&lt;'a&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;'a self,<br>&nbsp;&nbsp;&nbsp;&nbsp;col: <a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.u32.html">u32</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;prefix: &amp;'a [<a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.u8.html">u8</a>]<br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.66.1/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/1.66.1/core/iter/traits/iterator/trait.Iterator.html" title="trait core::iter::traits::iterator::Iterator">Iterator</a>&lt;Item = (<a class="struct" href="https://doc.rust-lang.org/1.66.1/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;[<a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.u8.html">u8</a>]&gt;, <a class="struct" href="https://doc.rust-lang.org/1.66.1/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;[<a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.u8.html">u8</a>]&gt;)&gt; + 'a&gt;</h4></section></summary><div class="docblock"><p>Iterate over the data for a given column, returning all key/value pairs
where the key starts with the given prefix.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.restore" class="method has-srclink"><a class="srclink rightside" href="../src/kvdb/lib.rs.html#132">source</a><h4 class="code-header">fn <a href="#tymethod.restore" class="fnname">restore</a>(&amp;self, new_db: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.str.html">str</a>) -&gt; <a class="type" href="https://doc.rust-lang.org/1.66.1/std/io/error/type.Result.html" title="type std::io::error::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.unit.html">()</a>&gt;</h4></section></summary><div class="docblock"><p>Attempt to replace this database with a new one located at the given path.</p>
</div></details></div><h2 id="provided-methods" class="small-section-header">Provided Methods<a href="#provided-methods" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.transaction" class="method has-srclink"><a class="srclink rightside" href="../src/kvdb/lib.rs.html#107-109">source</a><h4 class="code-header">fn <a href="#method.transaction" class="fnname">transaction</a>(&amp;self) -&gt; <a class="struct" href="struct.DBTransaction.html" title="struct kvdb::DBTransaction">DBTransaction</a></h4></section></summary><div class="docblock"><p>Helper to create a new transaction.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.io_stats" class="method has-srclink"><a class="srclink rightside" href="../src/kvdb/lib.rs.html#140-142">source</a><h4 class="code-header">fn <a href="#method.io_stats" class="fnname">io_stats</a>(&amp;self, _kind: <a class="enum" href="enum.IoStatsKind.html" title="enum kvdb::IoStatsKind">IoStatsKind</a>) -&gt; <a class="struct" href="struct.IoStats.html" title="struct kvdb::IoStats">IoStats</a></h4></section></summary><div class="docblock"><p>Query statistics.</p>
<p>Not all kvdb implementations are able or expected to implement this, so by
default, empty statistics is returned. Also, not all kvdb implementation
can return every statistic or configured to do so (some statistics gathering
may impede the performance and might be off by default).</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.has_key" class="method has-srclink"><a class="srclink rightside" href="../src/kvdb/lib.rs.html#145-147">source</a><h4 class="code-header">fn <a href="#method.has_key" class="fnname">has_key</a>(&amp;self, col: <a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.u32.html">u32</a>, key: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.u8.html">u8</a>]) -&gt; <a class="type" href="https://doc.rust-lang.org/1.66.1/std/io/error/type.Result.html" title="type std::io::error::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.bool.html">bool</a>&gt;</h4></section></summary><div class="docblock"><p>Check for the existence of a value by key.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.has_prefix" class="method has-srclink"><a class="srclink rightside" href="../src/kvdb/lib.rs.html#150-152">source</a><h4 class="code-header">fn <a href="#method.has_prefix" class="fnname">has_prefix</a>(&amp;self, col: <a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.u32.html">u32</a>, prefix: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.u8.html">u8</a>]) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Check for the existence of a value by prefix.</p>
</div></details></div><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor"></a></h2><div id="implementors-list"></div><script src="../implementors/kvdb/trait.KeyValueDB.js" async></script></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="kvdb" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.66.1 (90743e729 2023-01-10)" ></div></body></html>