<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Cross-platform virtual memory API."><meta name="keywords" content="rust, rustlang, rust-lang, region"><title>region - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-1f7d512b176f0f72.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-124a1ca42af929b6.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-6827029ac823cab7.css" id="mainThemeStyle"><link rel="stylesheet" id="themeStyle" href="../static.files/light-ebce58d0a40c3431.css"><link rel="stylesheet" disabled href="../static.files/dark-f23faae4a2daf9a6.css"><link rel="stylesheet" disabled href="../static.files/ayu-8af5e100b21cd173.css"><script id="default-settings" ></script><script src="../static.files/storage-d43fa987303ecbbb.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-c55e1eb52e1886b4.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../region/index.html"><div class="logo-container"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></div></a><h2></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../region/index.html"><div class="logo-container"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></div></a><h2 class="location"><a href="#">Crate region</a></h2><div class="sidebar-elems"><ul class="block"><li class="version">Version 3.0.0</li><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Definitions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-5ec35bf9ca753509.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn">Crate <a class="mod" href="#">region</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../src/region/lib.rs.html#1-419">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Cross-platform virtual memory API.</p>
<p>This crate provides a cross-platform Rust API for querying and manipulating
virtual memory. It is a thin abstraction, with the underlying interaction
implemented using platform specific APIs (e.g <code>VirtualQuery</code>, <code>VirtualLock</code>,
<code>mprotect</code>, <code>mlock</code>). Albeit not all OS specific quirks are abstracted away;
for instance, some OSs enforce memory pages to be readable, whilst other may
prevent pages from becoming executable (i.e DEP).</p>
<p>This implementation operates with memory pages, which are aligned to the
operating system’s page size. On some systems, but not all, the system calls
for these operations require input to be aligned to a page boundary. To
remedy this inconsistency, whenever applicable, input is aligned to its
closest page boundary.</p>
<p><em>Note: a region is a collection of one or more pages laying consecutively in
memory, with the same properties.</em></p>
<h2 id="parallelism"><a href="#parallelism">Parallelism</a></h2>
<p>The properties of virtual memory pages can change at any time, unless all
threads that are unaccounted for in a process are stopped. Therefore to
obtain, e.g., a true picture of a process’ virtual memory, all other threads
must be halted. Otherwise, a region descriptor only represents a snapshot in
time.</p>
<h2 id="installation"><a href="#installation">Installation</a></h2>
<p>This crate is <a href="https://crates.io/crates/region">on crates.io</a> and can be
used by adding <code>region</code> to your dependencies in your project’s <code>Cargo.toml</code>.</p>
<div class="example-wrap"><pre class="language-toml"><code>[dependencies]
region = &quot;3.0.0&quot;
</code></pre></div><h2 id="examples"><a href="#examples">Examples</a></h2>
<ul>
<li>
<p>Cross-platform equivalents.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>data = [<span class="number">0xDE</span>, <span class="number">0xAD</span>, <span class="number">0xBE</span>, <span class="number">0xEF</span>];

<span class="comment">// Page size
</span><span class="kw">let </span>pz = region::page::size();
<span class="kw">let </span>pc = region::page::ceil(data.as_ptr());
<span class="kw">let </span>pf = region::page::floor(data.as_ptr());

<span class="comment">// VirtualQuery | &#39;/proc/self/maps&#39;
</span><span class="kw">let </span>q  = region::query(data.as_ptr())<span class="question-mark">?</span>;
<span class="kw">let </span>qr = region::query_range(data.as_ptr(), data.len())<span class="question-mark">?</span>;

<span class="comment">// VirtualAlloc | mmap
</span><span class="kw">let </span>alloc = region::alloc(<span class="number">100</span>, Protection::READ_WRITE)<span class="question-mark">?</span>;

<span class="comment">// VirtualProtect | mprotect
</span>region::protect(data.as_ptr(), data.len(), Protection::READ_WRITE_EXECUTE)<span class="question-mark">?</span>;

<span class="comment">// ... you can also temporarily change one or more pages&#39; protection
</span><span class="kw">let </span>handle = region::protect_with_handle(data.as_ptr(), data.len(), Protection::READ_WRITE_EXECUTE)<span class="question-mark">?</span>;

<span class="comment">// VirtualLock | mlock
</span><span class="kw">let </span>guard = region::lock(data.as_ptr(), data.len())<span class="question-mark">?</span>;</code></pre></div>
</li>
</ul>
</div></details><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="page/index.html" title="region::page mod">page</a></div><div class="item-right docblock-short">Page related functions.</div></div></div><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Allocation.html" title="region::Allocation struct">Allocation</a></div><div class="item-right docblock-short">A handle to an owned region of memory.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.LockGuard.html" title="region::LockGuard struct">LockGuard</a></div><div class="item-right docblock-short">A RAII implementation of a scoped lock.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ProtectGuard.html" title="region::ProtectGuard struct">ProtectGuard</a></div><div class="item-right docblock-short">A RAII implementation of a scoped protection guard.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Protection.html" title="region::Protection struct">Protection</a></div><div class="item-right docblock-short">A bitflag of zero or more protection attributes.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.QueryIter.html" title="region::QueryIter struct">QueryIter</a></div><div class="item-right docblock-short">An iterator over the <a href="struct.Region.html" title="Region"><code>Region</code></a>s that encompass an address range.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Region.html" title="region::Region struct">Region</a></div><div class="item-right docblock-short">A descriptor for a mapped memory region.</div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.Error.html" title="region::Error enum">Error</a></div><div class="item-right docblock-short">A collection of possible errors.</div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.alloc.html" title="region::alloc fn">alloc</a></div><div class="item-right docblock-short">Allocates one or more pages of memory, with a defined protection.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.alloc_at.html" title="region::alloc_at fn">alloc_at</a></div><div class="item-right docblock-short">Allocates one or more pages of memory, at a specific address, with a defined
protection.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.lock.html" title="region::lock fn">lock</a></div><div class="item-right docblock-short">Locks one or more memory regions to RAM.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.protect.html" title="region::protect fn">protect</a><sup title="unsafe function">⚠</sup></div><div class="item-right docblock-short">Changes the memory protection of one or more pages.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.protect_with_handle.html" title="region::protect_with_handle fn">protect_with_handle</a><sup title="unsafe function">⚠</sup></div><div class="item-right docblock-short">Temporarily changes the memory protection of one or more pages.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.query.html" title="region::query fn">query</a></div><div class="item-right docblock-short">Queries the OS with an address, returning the region it resides within.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.query_range.html" title="region::query_range fn">query_range</a></div><div class="item-right docblock-short">Queries the OS for mapped regions that overlap with the specified range.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.unlock.html" title="region::unlock fn">unlock</a></div><div class="item-right docblock-short">Unlocks one or more memory regions from RAM.</div></div></div><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="type" href="type.Result.html" title="region::Result type">Result</a></div><div class="item-right docblock-short">The result type used by this library.</div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="region" data-themes="" data-resource-suffix="" data-rustdoc-version="1.67.1 (d5a82bbd2 2023-02-07)" data-search-js="search-444266647c4dba98.js" data-settings-js="settings-bebeae96e00e4617.js" data-settings-css="settings-af96d9e2fc13e081.css" ></div></body></html>