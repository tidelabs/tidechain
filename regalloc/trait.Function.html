<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A trait defined by the regalloc client to provide access to its machine-instruction / CFG representation."><meta name="keywords" content="rust, rustlang, rust-lang, Function"><title>Function in regalloc - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" href="../normalize.css"><link rel="stylesheet" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" href="../ayu.css" disabled><link rel="stylesheet" href="../dark.css" disabled><link rel="stylesheet" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script defer src="sidebar-items.js"></script><script defer src="../main.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../regalloc/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div></a><h2></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../regalloc/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div></a><h2 class="location"><a href="#">Function</a></h2><div class="sidebar-elems"><section><h3><a href="#required-associated-types">Required Associated Types</a></h3><ul class="block"><li><a href="#associatedtype.Inst">Inst</a></li></ul><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.block_insns">block_insns</a></li><li><a href="#tymethod.block_succs">block_succs</a></li><li><a href="#tymethod.blocks">blocks</a></li><li><a href="#tymethod.entry_block">entry_block</a></li><li><a href="#tymethod.func_liveins">func_liveins</a></li><li><a href="#tymethod.func_liveouts">func_liveouts</a></li><li><a href="#tymethod.gen_move">gen_move</a></li><li><a href="#tymethod.gen_reload">gen_reload</a></li><li><a href="#tymethod.gen_spill">gen_spill</a></li><li><a href="#tymethod.gen_zero_len_nop">gen_zero_len_nop</a></li><li><a href="#tymethod.get_insn">get_insn</a></li><li><a href="#tymethod.get_insn_mut">get_insn_mut</a></li><li><a href="#tymethod.get_num_vregs">get_num_vregs</a></li><li><a href="#tymethod.get_regs">get_regs</a></li><li><a href="#tymethod.get_spillslot_size">get_spillslot_size</a></li><li><a href="#tymethod.insns">insns</a></li><li><a href="#tymethod.insns_mut">insns_mut</a></li><li><a href="#tymethod.is_move">is_move</a></li><li><a href="#tymethod.is_ret">is_ret</a></li><li><a href="#tymethod.map_regs">map_regs</a></li><li><a href="#tymethod.maybe_direct_reload">maybe_direct_reload</a></li></ul><h3><a href="#provided-methods">Provided Methods</a></h3><ul class="block"><li><a href="#method.insn_indices">insn_indices</a></li><li><a href="#method.is_included_in_clobbers">is_included_in_clobbers</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><h2><a href="index.html">In regalloc</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../wheel.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn">Trait <a href="index.html">regalloc</a>::<wbr><a class="trait" href="#">Function</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../src/regalloc/lib.rs.html#186-362">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><div class="item-decl"><pre class="rust trait"><code>pub trait Function {
    type <a href="#associatedtype.Inst" class="associatedtype">Inst</a>: <a class="trait" href="https://doc.rust-lang.org/1.66.1/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + <a class="trait" href="https://doc.rust-lang.org/1.66.1/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>;

<details class="rustdoc-toggle type-contents-toggle"><summary class="hideme"><span>Show 23 methods</span></summary>    fn <a href="#tymethod.insns" class="fnname">insns</a>(&amp;self) -&gt; &amp;[Self::<a class="associatedtype" href="trait.Function.html#associatedtype.Inst" title="type regalloc::Function::Inst">Inst</a>];
<span class="item-spacer"></span>    fn <a href="#tymethod.insns_mut" class="fnname">insns_mut</a>(&amp;mut self) -&gt; &amp;mut [Self::<a class="associatedtype" href="trait.Function.html#associatedtype.Inst" title="type regalloc::Function::Inst">Inst</a>];
<span class="item-spacer"></span>    fn <a href="#tymethod.get_insn" class="fnname">get_insn</a>(&amp;self, insn: <a class="enum" href="enum.InstIx.html" title="enum regalloc::InstIx">InstIx</a>) -&gt; &amp;Self::<a class="associatedtype" href="trait.Function.html#associatedtype.Inst" title="type regalloc::Function::Inst">Inst</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.get_insn_mut" class="fnname">get_insn_mut</a>(&amp;mut self, insn: <a class="enum" href="enum.InstIx.html" title="enum regalloc::InstIx">InstIx</a>) -&gt; &amp;mut Self::<a class="associatedtype" href="trait.Function.html#associatedtype.Inst" title="type regalloc::Function::Inst">Inst</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.blocks" class="fnname">blocks</a>(&amp;self) -&gt; <a class="struct" href="struct.Range.html" title="struct regalloc::Range">Range</a>&lt;<a class="enum" href="enum.BlockIx.html" title="enum regalloc::BlockIx">BlockIx</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.entry_block" class="fnname">entry_block</a>(&amp;self) -&gt; <a class="enum" href="enum.BlockIx.html" title="enum regalloc::BlockIx">BlockIx</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.block_insns" class="fnname">block_insns</a>(&amp;self, block: <a class="enum" href="enum.BlockIx.html" title="enum regalloc::BlockIx">BlockIx</a>) -&gt; <a class="struct" href="struct.Range.html" title="struct regalloc::Range">Range</a>&lt;<a class="enum" href="enum.InstIx.html" title="enum regalloc::InstIx">InstIx</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.block_succs" class="fnname">block_succs</a>(&amp;self, block: <a class="enum" href="enum.BlockIx.html" title="enum regalloc::BlockIx">BlockIx</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.66.1/alloc/borrow/enum.Cow.html" title="enum alloc::borrow::Cow">Cow</a>&lt;'_, [<a class="enum" href="enum.BlockIx.html" title="enum regalloc::BlockIx">BlockIx</a>]&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.is_ret" class="fnname">is_ret</a>(&amp;self, insn: <a class="enum" href="enum.InstIx.html" title="enum regalloc::InstIx">InstIx</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.bool.html">bool</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.get_regs" class="fnname">get_regs</a>(insn: &amp;Self::<a class="associatedtype" href="trait.Function.html#associatedtype.Inst" title="type regalloc::Function::Inst">Inst</a>, collector: &amp;mut <a class="struct" href="struct.RegUsageCollector.html" title="struct regalloc::RegUsageCollector">RegUsageCollector</a>&lt;'_&gt;);
<span class="item-spacer"></span>    fn <a href="#tymethod.map_regs" class="fnname">map_regs</a>&lt;RUM:&nbsp;<a class="trait" href="trait.RegUsageMapper.html" title="trait regalloc::RegUsageMapper">RegUsageMapper</a>&gt;(insn: &amp;mut Self::<a class="associatedtype" href="trait.Function.html#associatedtype.Inst" title="type regalloc::Function::Inst">Inst</a>, maps: <a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.reference.html">&amp;</a>RUM);
<span class="item-spacer"></span>    fn <a href="#tymethod.is_move" class="fnname">is_move</a>(&amp;self, insn: &amp;Self::<a class="associatedtype" href="trait.Function.html#associatedtype.Inst" title="type regalloc::Function::Inst">Inst</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.66.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;(<a class="struct" href="struct.Writable.html" title="struct regalloc::Writable">Writable</a>&lt;<a class="struct" href="struct.Reg.html" title="struct regalloc::Reg">Reg</a>&gt;, <a class="struct" href="struct.Reg.html" title="struct regalloc::Reg">Reg</a>)&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.get_num_vregs" class="fnname">get_num_vregs</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.usize.html">usize</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.get_spillslot_size" class="fnname">get_spillslot_size</a>(&amp;self, regclass: <a class="enum" href="enum.RegClass.html" title="enum regalloc::RegClass">RegClass</a>, for_vreg: <a class="struct" href="struct.VirtualReg.html" title="struct regalloc::VirtualReg">VirtualReg</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.u32.html">u32</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.gen_spill" class="fnname">gen_spill</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to_slot: <a class="struct" href="struct.SpillSlot.html" title="struct regalloc::SpillSlot">SpillSlot</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from_reg: <a class="struct" href="struct.RealReg.html" title="struct regalloc::RealReg">RealReg</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for_vreg: <a class="enum" href="https://doc.rust-lang.org/1.66.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.VirtualReg.html" title="struct regalloc::VirtualReg">VirtualReg</a>&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; Self::<a class="associatedtype" href="trait.Function.html#associatedtype.Inst" title="type regalloc::Function::Inst">Inst</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.gen_reload" class="fnname">gen_reload</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to_reg: <a class="struct" href="struct.Writable.html" title="struct regalloc::Writable">Writable</a>&lt;<a class="struct" href="struct.RealReg.html" title="struct regalloc::RealReg">RealReg</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from_slot: <a class="struct" href="struct.SpillSlot.html" title="struct regalloc::SpillSlot">SpillSlot</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for_vreg: <a class="enum" href="https://doc.rust-lang.org/1.66.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.VirtualReg.html" title="struct regalloc::VirtualReg">VirtualReg</a>&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; Self::<a class="associatedtype" href="trait.Function.html#associatedtype.Inst" title="type regalloc::Function::Inst">Inst</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.gen_move" class="fnname">gen_move</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to_reg: <a class="struct" href="struct.Writable.html" title="struct regalloc::Writable">Writable</a>&lt;<a class="struct" href="struct.RealReg.html" title="struct regalloc::RealReg">RealReg</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from_reg: <a class="struct" href="struct.RealReg.html" title="struct regalloc::RealReg">RealReg</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for_vreg: <a class="struct" href="struct.VirtualReg.html" title="struct regalloc::VirtualReg">VirtualReg</a><br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; Self::<a class="associatedtype" href="trait.Function.html#associatedtype.Inst" title="type regalloc::Function::Inst">Inst</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.gen_zero_len_nop" class="fnname">gen_zero_len_nop</a>(&amp;self) -&gt; Self::<a class="associatedtype" href="trait.Function.html#associatedtype.Inst" title="type regalloc::Function::Inst">Inst</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.maybe_direct_reload" class="fnname">maybe_direct_reload</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;insn: &amp;Self::<a class="associatedtype" href="trait.Function.html#associatedtype.Inst" title="type regalloc::Function::Inst">Inst</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reg: <a class="struct" href="struct.VirtualReg.html" title="struct regalloc::VirtualReg">VirtualReg</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slot: <a class="struct" href="struct.SpillSlot.html" title="struct regalloc::SpillSlot">SpillSlot</a><br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.66.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;Self::<a class="associatedtype" href="trait.Function.html#associatedtype.Inst" title="type regalloc::Function::Inst">Inst</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.func_liveins" class="fnname">func_liveins</a>(&amp;self) -&gt; <a class="struct" href="struct.Set.html" title="struct regalloc::Set">Set</a>&lt;<a class="struct" href="struct.RealReg.html" title="struct regalloc::RealReg">RealReg</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.func_liveouts" class="fnname">func_liveouts</a>(&amp;self) -&gt; <a class="struct" href="struct.Set.html" title="struct regalloc::Set">Set</a>&lt;<a class="struct" href="struct.RealReg.html" title="struct regalloc::RealReg">RealReg</a>&gt;;

    fn <a href="#method.insn_indices" class="fnname">insn_indices</a>(&amp;self) -&gt; <a class="struct" href="struct.Range.html" title="struct regalloc::Range">Range</a>&lt;<a class="enum" href="enum.InstIx.html" title="enum regalloc::InstIx">InstIx</a>&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.is_included_in_clobbers" class="fnname">is_included_in_clobbers</a>(&amp;self, _insn: &amp;Self::<a class="associatedtype" href="trait.Function.html#associatedtype.Inst" title="type regalloc::Function::Inst">Inst</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.bool.html">bool</a> { ... }
</details>}</code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A trait defined by the regalloc client to provide access to its
machine-instruction / CFG representation.</p>
</div></details><h2 id="required-associated-types" class="small-section-header">Required Associated Types<a href="#required-associated-types" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle method-toggle" open><summary><section id="associatedtype.Inst" class="method has-srclink"><a class="srclink rightside" href="../src/regalloc/lib.rs.html#189">source</a><h4 class="code-header">type <a href="#associatedtype.Inst" class="associatedtype">Inst</a>: <a class="trait" href="https://doc.rust-lang.org/1.66.1/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + <a class="trait" href="https://doc.rust-lang.org/1.66.1/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a></h4></section></summary><div class="docblock"><p>Regalloc is parameterized on F: Function and so can use the projected
type F::Inst.</p>
</div></details></div><h2 id="required-methods" class="small-section-header">Required Methods<a href="#required-methods" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.insns" class="method has-srclink"><a class="srclink rightside" href="../src/regalloc/lib.rs.html#196">source</a><h4 class="code-header">fn <a href="#tymethod.insns" class="fnname">insns</a>(&amp;self) -&gt; &amp;[Self::<a class="associatedtype" href="trait.Function.html#associatedtype.Inst" title="type regalloc::Function::Inst">Inst</a>]</h4></section></summary><div class="docblock"><p>Allow access to the underlying vector of instructions.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.insns_mut" class="method has-srclink"><a class="srclink rightside" href="../src/regalloc/lib.rs.html#204">source</a><h4 class="code-header">fn <a href="#tymethod.insns_mut" class="fnname">insns_mut</a>(&amp;mut self) -&gt; &amp;mut [Self::<a class="associatedtype" href="trait.Function.html#associatedtype.Inst" title="type regalloc::Function::Inst">Inst</a>]</h4></section></summary><div class="docblock"><p>Allow mutable access to the underlying vector of instructions.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.get_insn" class="method has-srclink"><a class="srclink rightside" href="../src/regalloc/lib.rs.html#207">source</a><h4 class="code-header">fn <a href="#tymethod.get_insn" class="fnname">get_insn</a>(&amp;self, insn: <a class="enum" href="enum.InstIx.html" title="enum regalloc::InstIx">InstIx</a>) -&gt; &amp;Self::<a class="associatedtype" href="trait.Function.html#associatedtype.Inst" title="type regalloc::Function::Inst">Inst</a></h4></section></summary><div class="docblock"><p>Get an instruction with a type-safe InstIx index.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.get_insn_mut" class="method has-srclink"><a class="srclink rightside" href="../src/regalloc/lib.rs.html#211">source</a><h4 class="code-header">fn <a href="#tymethod.get_insn_mut" class="fnname">get_insn_mut</a>(&amp;mut self, insn: <a class="enum" href="enum.InstIx.html" title="enum regalloc::InstIx">InstIx</a>) -&gt; &amp;mut Self::<a class="associatedtype" href="trait.Function.html#associatedtype.Inst" title="type regalloc::Function::Inst">Inst</a></h4></section></summary><div class="docblock"><p>Get a mutable borrow of an instruction with the given type-safe InstIx
index.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.blocks" class="method has-srclink"><a class="srclink rightside" href="../src/regalloc/lib.rs.html#214">source</a><h4 class="code-header">fn <a href="#tymethod.blocks" class="fnname">blocks</a>(&amp;self) -&gt; <a class="struct" href="struct.Range.html" title="struct regalloc::Range">Range</a>&lt;<a class="enum" href="enum.BlockIx.html" title="enum regalloc::BlockIx">BlockIx</a>&gt;</h4></section></summary><div class="docblock"><p>Allow iteration over basic blocks (in instruction order).</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.entry_block" class="method has-srclink"><a class="srclink rightside" href="../src/regalloc/lib.rs.html#217">source</a><h4 class="code-header">fn <a href="#tymethod.entry_block" class="fnname">entry_block</a>(&amp;self) -&gt; <a class="enum" href="enum.BlockIx.html" title="enum regalloc::BlockIx">BlockIx</a></h4></section></summary><div class="docblock"><p>Get the index of the entry block.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.block_insns" class="method has-srclink"><a class="srclink rightside" href="../src/regalloc/lib.rs.html#220">source</a><h4 class="code-header">fn <a href="#tymethod.block_insns" class="fnname">block_insns</a>(&amp;self, block: <a class="enum" href="enum.BlockIx.html" title="enum regalloc::BlockIx">BlockIx</a>) -&gt; <a class="struct" href="struct.Range.html" title="struct regalloc::Range">Range</a>&lt;<a class="enum" href="enum.InstIx.html" title="enum regalloc::InstIx">InstIx</a>&gt;</h4></section></summary><div class="docblock"><p>Provide the range of instruction indices contained in each block.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.block_succs" class="method has-srclink"><a class="srclink rightside" href="../src/regalloc/lib.rs.html#223">source</a><h4 class="code-header">fn <a href="#tymethod.block_succs" class="fnname">block_succs</a>(&amp;self, block: <a class="enum" href="enum.BlockIx.html" title="enum regalloc::BlockIx">BlockIx</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.66.1/alloc/borrow/enum.Cow.html" title="enum alloc::borrow::Cow">Cow</a>&lt;'_, [<a class="enum" href="enum.BlockIx.html" title="enum regalloc::BlockIx">BlockIx</a>]&gt;</h4></section></summary><div class="docblock"><p>Get CFG successors for a given block.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.is_ret" class="method has-srclink"><a class="srclink rightside" href="../src/regalloc/lib.rs.html#226">source</a><h4 class="code-header">fn <a href="#tymethod.is_ret" class="fnname">is_ret</a>(&amp;self, insn: <a class="enum" href="enum.InstIx.html" title="enum regalloc::InstIx">InstIx</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Determine whether an instruction is a return instruction.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.get_regs" class="method has-srclink"><a class="srclink rightside" href="../src/regalloc/lib.rs.html#253">source</a><h4 class="code-header">fn <a href="#tymethod.get_regs" class="fnname">get_regs</a>(insn: &amp;Self::<a class="associatedtype" href="trait.Function.html#associatedtype.Inst" title="type regalloc::Function::Inst">Inst</a>, collector: &amp;mut <a class="struct" href="struct.RegUsageCollector.html" title="struct regalloc::RegUsageCollector">RegUsageCollector</a>&lt;'_&gt;)</h4></section></summary><div class="docblock"><p>Add to <code>collector</code> the used, defined, and modified registers for an
instruction.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.map_regs" class="method has-srclink"><a class="srclink rightside" href="../src/regalloc/lib.rs.html#265">source</a><h4 class="code-header">fn <a href="#tymethod.map_regs" class="fnname">map_regs</a>&lt;RUM:&nbsp;<a class="trait" href="trait.RegUsageMapper.html" title="trait regalloc::RegUsageMapper">RegUsageMapper</a>&gt;(insn: &amp;mut Self::<a class="associatedtype" href="trait.Function.html#associatedtype.Inst" title="type regalloc::Function::Inst">Inst</a>, maps: <a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.reference.html">&amp;</a>RUM)</h4></section></summary><div class="docblock"><p>Map each register slot through a virtual-to-real mapping indexed
by virtual register. The two separate maps in <code>maps.pre</code> and
<code>maps.post</code> provide the mapping to use for uses (which semantically
occur just prior to the instruction’s effect) and defs (which
semantically occur just after the instruction’s effect). Regs that were
“modified” can use either map; the vreg should be the same in both.</p>
<p>Note that this does not take a <code>self</code>, because we want to allow the
regalloc to have a mutable borrow of an insn (which borrows the whole
Function in turn) outstanding while calling this.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.is_move" class="method has-srclink"><a class="srclink rightside" href="../src/regalloc/lib.rs.html#268">source</a><h4 class="code-header">fn <a href="#tymethod.is_move" class="fnname">is_move</a>(&amp;self, insn: &amp;Self::<a class="associatedtype" href="trait.Function.html#associatedtype.Inst" title="type regalloc::Function::Inst">Inst</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.66.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;(<a class="struct" href="struct.Writable.html" title="struct regalloc::Writable">Writable</a>&lt;<a class="struct" href="struct.Reg.html" title="struct regalloc::Reg">Reg</a>&gt;, <a class="struct" href="struct.Reg.html" title="struct regalloc::Reg">Reg</a>)&gt;</h4></section></summary><div class="docblock"><p>Allow the regalloc to query whether this is a move. Returns (dst, src).</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.get_num_vregs" class="method has-srclink"><a class="srclink rightside" href="../src/regalloc/lib.rs.html#273">source</a><h4 class="code-header">fn <a href="#tymethod.get_num_vregs" class="fnname">get_num_vregs</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.usize.html">usize</a></h4></section></summary><div class="docblock"><p>Get the precise number of <code>VirtualReg</code> in use in this function, to allow preallocating data
structures. This number <em>must</em> be a correct lower-bound, otherwise invalid index failures
may happen; it is of course better if it is exact.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.get_spillslot_size" class="method has-srclink"><a class="srclink rightside" href="../src/regalloc/lib.rs.html#290">source</a><h4 class="code-header">fn <a href="#tymethod.get_spillslot_size" class="fnname">get_spillslot_size</a>(&amp;self, regclass: <a class="enum" href="enum.RegClass.html" title="enum regalloc::RegClass">RegClass</a>, for_vreg: <a class="struct" href="struct.VirtualReg.html" title="struct regalloc::VirtualReg">VirtualReg</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.u32.html">u32</a></h4></section></summary><div class="docblock"><p>How many logical spill slots does the given regclass require?  E.g., on a
64-bit machine, spill slots may nominally be 64-bit words, but a 128-bit
vector value will require two slots.  The regalloc will always align on
this size.</p>
<p>This passes the associated virtual register to the client as well,
because the way in which we spill a real register may depend on the
value that we are using it for. E.g., if a machine has V128 registers
but we also use them for F32 and F64 values, we may use a different
store-slot size and smaller-operand store/load instructions for an F64
than for a true V128.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.gen_spill" class="method has-srclink"><a class="srclink rightside" href="../src/regalloc/lib.rs.html#298-303">source</a><h4 class="code-header">fn <a href="#tymethod.gen_spill" class="fnname">gen_spill</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;to_slot: <a class="struct" href="struct.SpillSlot.html" title="struct regalloc::SpillSlot">SpillSlot</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;from_reg: <a class="struct" href="struct.RealReg.html" title="struct regalloc::RealReg">RealReg</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;for_vreg: <a class="enum" href="https://doc.rust-lang.org/1.66.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.VirtualReg.html" title="struct regalloc::VirtualReg">VirtualReg</a>&gt;<br>) -&gt; Self::<a class="associatedtype" href="trait.Function.html#associatedtype.Inst" title="type regalloc::Function::Inst">Inst</a></h4></section></summary><div class="docblock"><p>Generate a spill instruction for insertion into the instruction
sequence. The associated virtual register (whose value is being spilled)
is passed, if it exists, so that the client may make decisions about the
instruction to generate based on the type of value in question.  Because
the register allocator will insert spill instructions at arbitrary points,
the returned instruction here must not modify the machine’s condition codes.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.gen_reload" class="method has-srclink"><a class="srclink rightside" href="../src/regalloc/lib.rs.html#309-314">source</a><h4 class="code-header">fn <a href="#tymethod.gen_reload" class="fnname">gen_reload</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;to_reg: <a class="struct" href="struct.Writable.html" title="struct regalloc::Writable">Writable</a>&lt;<a class="struct" href="struct.RealReg.html" title="struct regalloc::RealReg">RealReg</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;from_slot: <a class="struct" href="struct.SpillSlot.html" title="struct regalloc::SpillSlot">SpillSlot</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;for_vreg: <a class="enum" href="https://doc.rust-lang.org/1.66.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.VirtualReg.html" title="struct regalloc::VirtualReg">VirtualReg</a>&gt;<br>) -&gt; Self::<a class="associatedtype" href="trait.Function.html#associatedtype.Inst" title="type regalloc::Function::Inst">Inst</a></h4></section></summary><div class="docblock"><p>Generate a reload instruction for insertion into the instruction
sequence. The associated virtual register (whose value is being loaded)
is passed as well, if it exists.  The returned instruction must not modify
the machine’s condition codes.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.gen_move" class="method has-srclink"><a class="srclink rightside" href="../src/regalloc/lib.rs.html#319-324">source</a><h4 class="code-header">fn <a href="#tymethod.gen_move" class="fnname">gen_move</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;to_reg: <a class="struct" href="struct.Writable.html" title="struct regalloc::Writable">Writable</a>&lt;<a class="struct" href="struct.RealReg.html" title="struct regalloc::RealReg">RealReg</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;from_reg: <a class="struct" href="struct.RealReg.html" title="struct regalloc::RealReg">RealReg</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;for_vreg: <a class="struct" href="struct.VirtualReg.html" title="struct regalloc::VirtualReg">VirtualReg</a><br>) -&gt; Self::<a class="associatedtype" href="trait.Function.html#associatedtype.Inst" title="type regalloc::Function::Inst">Inst</a></h4></section></summary><div class="docblock"><p>Generate a register-to-register move for insertion into the instruction
sequence. The associated virtual register is passed as well.  The
returned instruction must not modify the machine’s condition codes.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.gen_zero_len_nop" class="method has-srclink"><a class="srclink rightside" href="../src/regalloc/lib.rs.html#327">source</a><h4 class="code-header">fn <a href="#tymethod.gen_zero_len_nop" class="fnname">gen_zero_len_nop</a>(&amp;self) -&gt; Self::<a class="associatedtype" href="trait.Function.html#associatedtype.Inst" title="type regalloc::Function::Inst">Inst</a></h4></section></summary><div class="docblock"><p>Generate an instruction which is a no-op and has zero length.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.maybe_direct_reload" class="method has-srclink"><a class="srclink rightside" href="../src/regalloc/lib.rs.html#340-345">source</a><h4 class="code-header">fn <a href="#tymethod.maybe_direct_reload" class="fnname">maybe_direct_reload</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;insn: &amp;Self::<a class="associatedtype" href="trait.Function.html#associatedtype.Inst" title="type regalloc::Function::Inst">Inst</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;reg: <a class="struct" href="struct.VirtualReg.html" title="struct regalloc::VirtualReg">VirtualReg</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;slot: <a class="struct" href="struct.SpillSlot.html" title="struct regalloc::SpillSlot">SpillSlot</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.66.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;Self::<a class="associatedtype" href="trait.Function.html#associatedtype.Inst" title="type regalloc::Function::Inst">Inst</a>&gt;</h4></section></summary><div class="docblock"><p>Try to alter an existing instruction to use a value directly in a
spillslot (accessing memory directly) instead of the given register. May
be useful on ISAs that have mem/reg ops, like x86.</p>
<p>Note that this is not <em>quite</em> just fusing a load with the op; if the
value is def’d or modified, it should be written back to the spill slot
as well. In other words, it is just using the spillslot as if it were a
real register, for reads and/or writes.</p>
<p>FIXME JRS 2020Feb06: state precisely the constraints on condition code
changes.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.func_liveins" class="method has-srclink"><a class="srclink rightside" href="../src/regalloc/lib.rs.html#355">source</a><h4 class="code-header">fn <a href="#tymethod.func_liveins" class="fnname">func_liveins</a>(&amp;self) -&gt; <a class="struct" href="struct.Set.html" title="struct regalloc::Set">Set</a>&lt;<a class="struct" href="struct.RealReg.html" title="struct regalloc::RealReg">RealReg</a>&gt;</h4></section></summary><div class="docblock"><p>Return the set of registers that should be considered live at the
beginning of the function. This is semantically equivalent to an
instruction at the top of the entry block def’ing all registers in this
set.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.func_liveouts" class="method has-srclink"><a class="srclink rightside" href="../src/regalloc/lib.rs.html#361">source</a><h4 class="code-header">fn <a href="#tymethod.func_liveouts" class="fnname">func_liveouts</a>(&amp;self) -&gt; <a class="struct" href="struct.Set.html" title="struct regalloc::Set">Set</a>&lt;<a class="struct" href="struct.RealReg.html" title="struct regalloc::RealReg">RealReg</a>&gt;</h4></section></summary><div class="docblock"><p>Return the set of registers that should be considered live at the
end of the function (after every return instruction). This is
semantically equivalent to an instruction at each block with no successors
that uses each of these registers.</p>
</div></details></div><h2 id="provided-methods" class="small-section-header">Provided Methods<a href="#provided-methods" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.insn_indices" class="method has-srclink"><a class="srclink rightside" href="../src/regalloc/lib.rs.html#199-201">source</a><h4 class="code-header">fn <a href="#method.insn_indices" class="fnname">insn_indices</a>(&amp;self) -&gt; <a class="struct" href="struct.Range.html" title="struct regalloc::Range">Range</a>&lt;<a class="enum" href="enum.InstIx.html" title="enum regalloc::InstIx">InstIx</a>&gt;</h4></section></summary><div class="docblock"><p>Get all instruction indices as an iterable range.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.is_included_in_clobbers" class="method has-srclink"><a class="srclink rightside" href="../src/regalloc/lib.rs.html#242-245">source</a><h4 class="code-header">fn <a href="#method.is_included_in_clobbers" class="fnname">is_included_in_clobbers</a>(&amp;self, _insn: &amp;Self::<a class="associatedtype" href="trait.Function.html#associatedtype.Inst" title="type regalloc::Function::Inst">Inst</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Determine whether an instruction should be considered while computing
the set of registers that need to be saved/restored in the function’s
prologue/epilogue, that is, the registers returned in
<code>clobbered_registers</code> in <code>RegAllocResult</code>.  computation. Only
instructions for which this function returns <code>true</code> will be used to
compute that set.</p>
<p>One reason that a client might <em>not</em> want an instruction to be included
would be if it can handle the clobbers some other way: for example,
ABI-support code might exclude call instructions’ defs and mods from the
clobber set, because (given the callee has same ABI as the caller) the
registers possibly written by the callee are all registers that the
caller is also allowed to clobber (not save/restore in
prologue/epilogue).</p>
</div></details></div><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor"></a></h2><div id="implementors-list"></div><script src="../implementors/regalloc/trait.Function.js" async></script></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="regalloc" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.66.1 (90743e729 2023-01-10)" ></div></body></html>