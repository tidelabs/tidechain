<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Trait for types implementing a record store."><meta name="keywords" content="rust, rustlang, rust-lang, RecordStore"><title>RecordStore in libp2p_kad::record::store - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Regular-1f7d512b176f0f72.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Bold-124a1ca42af929b6.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../static.files/rustdoc-6827029ac823cab7.css" id="mainThemeStyle"><link rel="stylesheet" id="themeStyle" href="../../../static.files/light-ebce58d0a40c3431.css"><link rel="stylesheet" disabled href="../../../static.files/dark-f23faae4a2daf9a6.css"><link rel="stylesheet" disabled href="../../../static.files/ayu-8af5e100b21cd173.css"><script id="default-settings" ></script><script src="../../../static.files/storage-d43fa987303ecbbb.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../static.files/main-c55e1eb52e1886b4.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../../libp2p_kad/index.html"><div class="logo-container"><img class="rust-logo" src="../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></div></a><h2></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../../../libp2p_kad/index.html"><div class="logo-container"><img class="rust-logo" src="../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></div></a><h2 class="location"><a href="#">RecordStore</a></h2><div class="sidebar-elems"><section><h3><a href="#required-associated-types">Required Associated Types</a></h3><ul class="block"><li><a href="#associatedtype.ProvidedIter">ProvidedIter</a></li><li><a href="#associatedtype.RecordsIter">RecordsIter</a></li></ul><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.add_provider">add_provider</a></li><li><a href="#tymethod.get">get</a></li><li><a href="#tymethod.provided">provided</a></li><li><a href="#tymethod.providers">providers</a></li><li><a href="#tymethod.put">put</a></li><li><a href="#tymethod.records">records</a></li><li><a href="#tymethod.remove">remove</a></li><li><a href="#tymethod.remove_provider">remove_provider</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><h2><a href="index.html">In libp2p_kad::record::store</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../static.files/wheel-5ec35bf9ca753509.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn">Trait <a href="../../index.html">libp2p_kad</a>::<wbr><a href="../index.html">record</a>::<wbr><a href="index.html">store</a>::<wbr><a class="trait" href="#">RecordStore</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../../src/libp2p_kad/record/store.rs.html#67-99">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><div class="item-decl"><pre class="rust trait"><code>pub trait RecordStore&lt;'a&gt; {
    type <a href="#associatedtype.RecordsIter" class="associatedtype">RecordsIter</a>: <a class="trait" href="https://doc.rust-lang.org/1.67.1/core/iter/traits/iterator/trait.Iterator.html" title="trait core::iter::traits::iterator::Iterator">Iterator</a>&lt;Item = <a class="enum" href="https://doc.rust-lang.org/1.67.1/alloc/borrow/enum.Cow.html" title="enum alloc::borrow::Cow">Cow</a>&lt;'a, <a class="struct" href="../struct.Record.html" title="struct libp2p_kad::record::Record">Record</a>&gt;&gt;;
    type <a href="#associatedtype.ProvidedIter" class="associatedtype">ProvidedIter</a>: <a class="trait" href="https://doc.rust-lang.org/1.67.1/core/iter/traits/iterator/trait.Iterator.html" title="trait core::iter::traits::iterator::Iterator">Iterator</a>&lt;Item = <a class="enum" href="https://doc.rust-lang.org/1.67.1/alloc/borrow/enum.Cow.html" title="enum alloc::borrow::Cow">Cow</a>&lt;'a, <a class="struct" href="../struct.ProviderRecord.html" title="struct libp2p_kad::record::ProviderRecord">ProviderRecord</a>&gt;&gt;;

    fn <a href="#tymethod.get" class="fn">get</a>(&amp;'a self, k: &amp;<a class="struct" href="../struct.Key.html" title="struct libp2p_kad::record::Key">Key</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.67.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.67.1/alloc/borrow/enum.Cow.html" title="enum alloc::borrow::Cow">Cow</a>&lt;'_, <a class="struct" href="../struct.Record.html" title="struct libp2p_kad::record::Record">Record</a>&gt;&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.put" class="fn">put</a>(&amp;'a mut self, r: <a class="struct" href="../struct.Record.html" title="struct libp2p_kad::record::Record">Record</a>) -&gt; <a class="type" href="type.Result.html" title="type libp2p_kad::record::store::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.67.1/std/primitive.unit.html">()</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.remove" class="fn">remove</a>(&amp;'a mut self, k: &amp;<a class="struct" href="../struct.Key.html" title="struct libp2p_kad::record::Key">Key</a>);
<span class="item-spacer"></span>    fn <a href="#tymethod.records" class="fn">records</a>(&amp;'a self) -&gt; Self::<a class="associatedtype" href="trait.RecordStore.html#associatedtype.RecordsIter" title="type libp2p_kad::record::store::RecordStore::RecordsIter">RecordsIter</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.add_provider" class="fn">add_provider</a>(&amp;'a mut self, record: <a class="struct" href="../struct.ProviderRecord.html" title="struct libp2p_kad::record::ProviderRecord">ProviderRecord</a>) -&gt; <a class="type" href="type.Result.html" title="type libp2p_kad::record::store::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.67.1/std/primitive.unit.html">()</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.providers" class="fn">providers</a>(&amp;'a self, key: &amp;<a class="struct" href="../struct.Key.html" title="struct libp2p_kad::record::Key">Key</a>) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.67.1/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="../struct.ProviderRecord.html" title="struct libp2p_kad::record::ProviderRecord">ProviderRecord</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.provided" class="fn">provided</a>(&amp;'a self) -&gt; Self::<a class="associatedtype" href="trait.RecordStore.html#associatedtype.ProvidedIter" title="type libp2p_kad::record::store::RecordStore::ProvidedIter">ProvidedIter</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.remove_provider" class="fn">remove_provider</a>(&amp;'a mut self, k: &amp;<a class="struct" href="../struct.Key.html" title="struct libp2p_kad::record::Key">Key</a>, p: &amp;<a class="struct" href="../../../libp2p_core/peer_id/struct.PeerId.html" title="struct libp2p_core::peer_id::PeerId">PeerId</a>);
}</code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Trait for types implementing a record store.</p>
<p>There are two types of records managed by a <code>RecordStore</code>:</p>
<ol>
<li>
<p>Regular (value-)records. These records store an arbitrary value
associated with a key which is distributed to the closest nodes
to the key in the Kademlia DHT as per the standard Kademlia “push-model”.
These records are subject to re-replication and re-publication as
per the standard Kademlia protocol.</p>
</li>
<li>
<p>Provider records. These records associate the ID of a peer with a key
who can supposedly provide the associated value. These records are
mere “pointers” to the data which may be followed by contacting these
providers to obtain the value. These records are specific to the
libp2p Kademlia specification and realise a “pull-model” for distributed
content. Just like a regular record, a provider record is distributed
to the closest nodes to the key.</p>
</li>
</ol>
</div></details><h2 id="required-associated-types" class="small-section-header">Required Associated Types<a href="#required-associated-types" class="anchor">§</a></h2><div class="methods"><section id="associatedtype.RecordsIter" class="method has-srclink"><a class="srclink rightside" href="../../../src/libp2p_kad/record/store.rs.html#68">source</a><h4 class="code-header">type <a href="#associatedtype.RecordsIter" class="associatedtype">RecordsIter</a>: <a class="trait" href="https://doc.rust-lang.org/1.67.1/core/iter/traits/iterator/trait.Iterator.html" title="trait core::iter::traits::iterator::Iterator">Iterator</a>&lt;Item = <a class="enum" href="https://doc.rust-lang.org/1.67.1/alloc/borrow/enum.Cow.html" title="enum alloc::borrow::Cow">Cow</a>&lt;'a, <a class="struct" href="../struct.Record.html" title="struct libp2p_kad::record::Record">Record</a>&gt;&gt;</h4></section><section id="associatedtype.ProvidedIter" class="method has-srclink"><a class="srclink rightside" href="../../../src/libp2p_kad/record/store.rs.html#69">source</a><h4 class="code-header">type <a href="#associatedtype.ProvidedIter" class="associatedtype">ProvidedIter</a>: <a class="trait" href="https://doc.rust-lang.org/1.67.1/core/iter/traits/iterator/trait.Iterator.html" title="trait core::iter::traits::iterator::Iterator">Iterator</a>&lt;Item = <a class="enum" href="https://doc.rust-lang.org/1.67.1/alloc/borrow/enum.Cow.html" title="enum alloc::borrow::Cow">Cow</a>&lt;'a, <a class="struct" href="../struct.ProviderRecord.html" title="struct libp2p_kad::record::ProviderRecord">ProviderRecord</a>&gt;&gt;</h4></section></div><h2 id="required-methods" class="small-section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.get" class="method has-srclink"><a class="srclink rightside" href="../../../src/libp2p_kad/record/store.rs.html#72">source</a><h4 class="code-header">fn <a href="#tymethod.get" class="fn">get</a>(&amp;'a self, k: &amp;<a class="struct" href="../struct.Key.html" title="struct libp2p_kad::record::Key">Key</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.67.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.67.1/alloc/borrow/enum.Cow.html" title="enum alloc::borrow::Cow">Cow</a>&lt;'_, <a class="struct" href="../struct.Record.html" title="struct libp2p_kad::record::Record">Record</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Gets a record from the store, given its key.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.put" class="method has-srclink"><a class="srclink rightside" href="../../../src/libp2p_kad/record/store.rs.html#75">source</a><h4 class="code-header">fn <a href="#tymethod.put" class="fn">put</a>(&amp;'a mut self, r: <a class="struct" href="../struct.Record.html" title="struct libp2p_kad::record::Record">Record</a>) -&gt; <a class="type" href="type.Result.html" title="type libp2p_kad::record::store::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.67.1/std/primitive.unit.html">()</a>&gt;</h4></section></summary><div class="docblock"><p>Puts a record into the store.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.remove" class="method has-srclink"><a class="srclink rightside" href="../../../src/libp2p_kad/record/store.rs.html#78">source</a><h4 class="code-header">fn <a href="#tymethod.remove" class="fn">remove</a>(&amp;'a mut self, k: &amp;<a class="struct" href="../struct.Key.html" title="struct libp2p_kad::record::Key">Key</a>)</h4></section></summary><div class="docblock"><p>Removes the record with the given key from the store.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.records" class="method has-srclink"><a class="srclink rightside" href="../../../src/libp2p_kad/record/store.rs.html#81">source</a><h4 class="code-header">fn <a href="#tymethod.records" class="fn">records</a>(&amp;'a self) -&gt; Self::<a class="associatedtype" href="trait.RecordStore.html#associatedtype.RecordsIter" title="type libp2p_kad::record::store::RecordStore::RecordsIter">RecordsIter</a></h4></section></summary><div class="docblock"><p>Gets an iterator over all (value-) records currently stored.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.add_provider" class="method has-srclink"><a class="srclink rightside" href="../../../src/libp2p_kad/record/store.rs.html#88">source</a><h4 class="code-header">fn <a href="#tymethod.add_provider" class="fn">add_provider</a>(&amp;'a mut self, record: <a class="struct" href="../struct.ProviderRecord.html" title="struct libp2p_kad::record::ProviderRecord">ProviderRecord</a>) -&gt; <a class="type" href="type.Result.html" title="type libp2p_kad::record::store::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.67.1/std/primitive.unit.html">()</a>&gt;</h4></section></summary><div class="docblock"><p>Adds a provider record to the store.</p>
<p>A record store only needs to store a number of provider records
for a key corresponding to the replication factor and should
store those records whose providers are closest to the key.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.providers" class="method has-srclink"><a class="srclink rightside" href="../../../src/libp2p_kad/record/store.rs.html#91">source</a><h4 class="code-header">fn <a href="#tymethod.providers" class="fn">providers</a>(&amp;'a self, key: &amp;<a class="struct" href="../struct.Key.html" title="struct libp2p_kad::record::Key">Key</a>) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.67.1/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="../struct.ProviderRecord.html" title="struct libp2p_kad::record::ProviderRecord">ProviderRecord</a>&gt;</h4></section></summary><div class="docblock"><p>Gets a copy of the stored provider records for the given key.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.provided" class="method has-srclink"><a class="srclink rightside" href="../../../src/libp2p_kad/record/store.rs.html#95">source</a><h4 class="code-header">fn <a href="#tymethod.provided" class="fn">provided</a>(&amp;'a self) -&gt; Self::<a class="associatedtype" href="trait.RecordStore.html#associatedtype.ProvidedIter" title="type libp2p_kad::record::store::RecordStore::ProvidedIter">ProvidedIter</a></h4></section></summary><div class="docblock"><p>Gets an iterator over all stored provider records for which the
node owning the store is itself the provider.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.remove_provider" class="method has-srclink"><a class="srclink rightside" href="../../../src/libp2p_kad/record/store.rs.html#98">source</a><h4 class="code-header">fn <a href="#tymethod.remove_provider" class="fn">remove_provider</a>(&amp;'a mut self, k: &amp;<a class="struct" href="../struct.Key.html" title="struct libp2p_kad::record::Key">Key</a>, p: &amp;<a class="struct" href="../../../libp2p_core/peer_id/struct.PeerId.html" title="struct libp2p_core::peer_id::PeerId">PeerId</a>)</h4></section></summary><div class="docblock"><p>Removes a provider record from the store.</p>
</div></details></div><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-RecordStore%3C%27a%3E-for-MemoryStore" class="impl has-srclink"><a class="srclink rightside" href="../../../src/libp2p_kad/record/store/memory.rs.html#99-214">source</a><a href="#impl-RecordStore%3C%27a%3E-for-MemoryStore" class="anchor">§</a><h3 class="code-header">impl&lt;'a&gt; <a class="trait" href="trait.RecordStore.html" title="trait libp2p_kad::record::store::RecordStore">RecordStore</a>&lt;'a&gt; for <a class="struct" href="struct.MemoryStore.html" title="struct libp2p_kad::record::store::MemoryStore">MemoryStore</a></h3></section></summary><div class="impl-items"><section id="associatedtype.RecordsIter-1" class="associatedtype trait-impl has-srclink"><a href="#associatedtype.RecordsIter-1" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.RecordsIter" class="associatedtype">RecordsIter</a> = <a class="struct" href="https://doc.rust-lang.org/1.67.1/core/iter/adapters/map/struct.Map.html" title="struct core::iter::adapters::map::Map">Map</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.67.1/std/collections/hash/map/struct.Values.html" title="struct std::collections::hash::map::Values">Values</a>&lt;'a, <a class="struct" href="../struct.Key.html" title="struct libp2p_kad::record::Key">Key</a>, <a class="struct" href="../struct.Record.html" title="struct libp2p_kad::record::Record">Record</a>&gt;, <a class="primitive" href="https://doc.rust-lang.org/1.67.1/std/primitive.fn.html">fn</a>(_: &amp;'a <a class="struct" href="../struct.Record.html" title="struct libp2p_kad::record::Record">Record</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.67.1/alloc/borrow/enum.Cow.html" title="enum alloc::borrow::Cow">Cow</a>&lt;'a, <a class="struct" href="../struct.Record.html" title="struct libp2p_kad::record::Record">Record</a>&gt;&gt;</h4></section><section id="associatedtype.ProvidedIter-1" class="associatedtype trait-impl has-srclink"><a href="#associatedtype.ProvidedIter-1" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.ProvidedIter" class="associatedtype">ProvidedIter</a> = <a class="struct" href="https://doc.rust-lang.org/1.67.1/core/iter/adapters/map/struct.Map.html" title="struct core::iter::adapters::map::Map">Map</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.67.1/std/collections/hash/set/struct.Iter.html" title="struct std::collections::hash::set::Iter">Iter</a>&lt;'a, <a class="struct" href="../struct.ProviderRecord.html" title="struct libp2p_kad::record::ProviderRecord">ProviderRecord</a>&gt;, <a class="primitive" href="https://doc.rust-lang.org/1.67.1/std/primitive.fn.html">fn</a>(_: &amp;'a <a class="struct" href="../struct.ProviderRecord.html" title="struct libp2p_kad::record::ProviderRecord">ProviderRecord</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.67.1/alloc/borrow/enum.Cow.html" title="enum alloc::borrow::Cow">Cow</a>&lt;'a, <a class="struct" href="../struct.ProviderRecord.html" title="struct libp2p_kad::record::ProviderRecord">ProviderRecord</a>&gt;&gt;</h4></section></div></details></div><script src="../../../implementors/libp2p_kad/record/store/trait.RecordStore.js" async></script></section></div></main><div id="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="libp2p_kad" data-themes="" data-resource-suffix="" data-rustdoc-version="1.67.1 (d5a82bbd2 2023-02-07)" data-search-js="search-444266647c4dba98.js" data-settings-js="settings-bebeae96e00e4617.js" data-settings-css="settings-af96d9e2fc13e081.css" ></div></body></html>